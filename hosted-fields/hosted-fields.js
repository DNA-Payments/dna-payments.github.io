!function(){var t={7757:function(t,e,r){t.exports=r(5666)},8585:function(t){"use strict";var e=function(){function t(){this._events={}}return t.prototype.on=function(t,e){this._events[t]?this._events[t].push(e):this._events[t]=[e]},t.prototype.off=function(t,e){var r=this._events[t];if(r){var n=r.indexOf(e);r.splice(n,1)}},t.prototype._emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this._events[t];n&&n.forEach((function(t){t.apply(void 0,e)}))},t.prototype.hasListener=function(t){var e=this._events[t];return!!e&&e.length>0},t.createChild=function(e){e.prototype=Object.create(t.prototype,{constructor:e})},t}();t.exports=e},9684:function(t){"use strict";t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},4791:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Framebus=void 0;var n=r(2729),o=r(791),i=r(6620),a=r(3965),c=r(9889),u="undefined"!=typeof window&&window.Promise,s=function(){function t(t){void 0===t&&(t={}),this.origin=t.origin||"*",this.channel=t.channel||"",this.verifyDomain=t.verifyDomain,this.isDestroyed=!1,this.listeners=[]}return t.setPromise=function(e){t.Promise=e},t.target=function(e){return new t(e)},t.prototype.include=function(t){return null!=t&&null!=t.Window&&t.constructor===t.Window&&(c.childWindows.push(t),!0)},t.prototype.target=function(e){return t.target(e)},t.prototype.emit=function(t,e,r){if(this.isDestroyed)return!1;var o=this.origin;if(t=this.namespaceEvent(t),n.isntString(t))return!1;if(n.isntString(o))return!1;"function"==typeof e&&(r=e,e=void 0);var c=a.packagePayload(t,o,e,r);return!!c&&(i.broadcast(window.top||window.self,c,o),!0)},t.prototype.emitAsPromise=function(e,r){var n=this;return new t.Promise((function(t,o){n.emit(e,r,(function(e){t(e)}))||o(new Error('Listener not added for "'+e+'"'))}))},t.prototype.on=function(t,e){if(this.isDestroyed)return!1;var r=this,n=this.origin,i=e;return t=this.namespaceEvent(t),!o.subscriptionArgsInvalid(t,i,n)&&(this.verifyDomain&&(i=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r.checkOrigin(this&&this.origin)&&e.apply(void 0,t)}),this.listeners.push({eventName:t,handler:i,originalHandler:e}),c.subscribers[n]=c.subscribers[n]||{},c.subscribers[n][t]=c.subscribers[n][t]||[],c.subscribers[n][t].push(i),!0)},t.prototype.off=function(t,e){var r=e;if(this.isDestroyed)return!1;if(this.verifyDomain)for(var n=0;n<this.listeners.length;n++){var i=this.listeners[n];i.originalHandler===e&&(r=i.handler)}t=this.namespaceEvent(t);var a=this.origin;if(o.subscriptionArgsInvalid(t,r,a))return!1;var u=c.subscribers[a]&&c.subscribers[a][t];if(!u)return!1;for(n=0;n<u.length;n++)if(u[n]===r)return u.splice(n,1),!0;return!1},t.prototype.teardown=function(){if(!this.isDestroyed){this.isDestroyed=!0;for(var t=0;t<this.listeners.length;t++){var e=this.listeners[t];this.off(e.eventName,e.handler)}this.listeners.length=0}},t.prototype.checkOrigin=function(t){var e,r=document.createElement("a");return r.href=location.href,e="https:"===r.protocol?r.host.replace(/:443$/,""):"http:"===r.protocol?r.host.replace(/:80$/,""):r.host,r.protocol+"//"+e===t||!this.verifyDomain||this.verifyDomain(t)},t.prototype.namespaceEvent=function(t){return this.channel?this.channel+":"+t:t},t.Promise=u,t}();e.Framebus=s},6135:function(t,e,r){"use strict";var n=r(5119),o=r(4791);n.attach(),t.exports=o.Framebus},5119:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detach=e.attach=void 0;var n=r(1883),o=!1;e.attach=function(){o||"undefined"==typeof window||(o=!0,window.addEventListener("message",n.onmessage,!1))},e.detach=function(){o=!1,window.removeEventListener("message",n.onmessage,!1)}},1449:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.broadcastToChildWindows=void 0;var n=r(6620),o=r(9889);e.broadcastToChildWindows=function(t,e,r){for(var i=o.childWindows.length-1;i>=0;i--){var a=o.childWindows[i];a.closed?o.childWindows.splice(i,1):r!==a&&n.broadcast(a.top,t,e)}}},6620:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.broadcast=void 0;var n=r(9065);e.broadcast=function t(e,r,o){var i,a=0;try{for(e.postMessage(r,o),n.hasOpener(e)&&e.opener.top!==window.top&&t(e.opener.top,r,o);i=e.frames[a];)t(i,r,o),a++}catch(t){}}},9889:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.subscribers=e.childWindows=e.prefix=void 0,e.prefix="/*framebus*/",e.childWindows=[],e.subscribers={}},4286:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispatch=void 0;var n=r(9889);e.dispatch=function(t,e,r,o,i){if(n.subscribers[t]&&n.subscribers[t][e]){var a=[];r&&a.push(r),o&&a.push(o);for(var c=0;c<n.subscribers[t][e].length;c++)n.subscribers[t][e][c].apply(i,a)}}},9065:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasOpener=void 0,e.hasOpener=function(t){return t.top===t&&null!=t.opener&&t.opener!==t&&!0!==t.opener.closed}},2729:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isntString=void 0,e.isntString=function(t){return"string"!=typeof t}},1883:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onmessage=void 0;var n=r(2729),o=r(2310),i=r(4286),a=r(1449);e.onmessage=function(t){if(!n.isntString(t.data)){var e=o.unpackPayload(t);if(e){var r=e.eventData,c=e.reply;i.dispatch("*",e.event,r,c,t),i.dispatch(t.origin,e.event,r,c,t),a.broadcastToChildWindows(t.data,e.origin,t.source)}}}},3965:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.packagePayload=void 0;var n=r(1085),o=r(9889);e.packagePayload=function(t,e,r,i){var a,c={event:t,origin:e};"function"==typeof i&&(c.reply=n.subscribeReplier(i,e)),c.eventData=r;try{a=o.prefix+JSON.stringify(c)}catch(t){throw new Error("Could not stringify event: "+t.message)}return a}},1085:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeReplier=void 0;var o=r(4791),i=n(r(9684));e.subscribeReplier=function(t,e){var r=i.default();return o.Framebus.target({origin:e}).on(r,(function n(i,a){t(i,a),o.Framebus.target({origin:e}).off(r,n)})),r}},791:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.subscriptionArgsInvalid=void 0;var n=r(2729);e.subscriptionArgsInvalid=function(t,e,r){return!!n.isntString(t)||"function"!=typeof e||n.isntString(r)}},2310:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unpackPayload=void 0;var n=r(9889),o=r(3965);e.unpackPayload=function(t){var e;if(t.data.slice(0,n.prefix.length)!==n.prefix)return!1;try{e=JSON.parse(t.data.slice(n.prefix.length))}catch(t){return!1}if(e.reply){var r=t.origin,i=t.source,a=e.reply;e.reply=function(t){if(i){var e=o.packagePayload(a,r,t);e&&i.postMessage(e,r)}}}return e}},5666:function(t){var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),a=new R(n||[]);return i._invoke=function(t,e,r){var n=l;return function(o,i){if(n===d)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=D(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=f(t,e,r);if("normal"===u.type){if(n=r.done?h:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=h,r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l="suspendedStart",p="suspendedYield",d="executing",h="completed",y={};function v(){}function m(){}function g(){}var b={};b[i]=function(){return this};var E=Object.getPrototypeOf,_=E&&E(E(S([])));_&&_!==r&&n.call(_,i)&&(b=_);var w=g.prototype=v.prototype=Object.create(b);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function D(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,D(t,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=f(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return m.prototype=w.constructor=g,g.constructor=m,m.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(x.prototype),x.prototype[a]=function(){return this},t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),u(w,c,"Generator"),w[i]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:S(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t,e=r(7757),n=r.n(e);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?d(t):e}var y=new Uint8Array(16);function v(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(y)}for(var m=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,g=function(t){return"string"==typeof t&&m.test(t)},b=[],E=0;E<256;++E)b.push((E+256).toString(16).substr(1));var _=function(t,e,r){var n=(t=t||{}).random||(t.rng||v)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(b[t[e+0]]+b[t[e+1]]+b[t[e+2]]+b[t[e+3]]+"-"+b[t[e+4]]+b[t[e+5]]+"-"+b[t[e+6]]+b[t[e+7]]+"-"+b[t[e+8]]+b[t[e+9]]+"-"+b[t[e+10]]+b[t[e+11]]+b[t[e+12]]+b[t[e+13]]+b[t[e+14]]+b[t[e+15]]).toLowerCase();if(!g(r))throw TypeError("Stringified UUID is invalid");return r}(n)},w=r(6135),O=r.n(w),x=r(8585),D=r.n(x);function L(t,e){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];null==n?t.removeAttribute(r):t.setAttribute(r,n)}}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.createElement("iframe"),r=Object.assign({},R,t);return r.style&&"string"!=typeof r.style&&(Object.assign(e.style,r.style),delete r.style),L(e,r),e.getAttribute("id")||(e.id=e.name),e}var R={src:"about:blank",frameBorder:0,allowtransparency:!0,scrolling:"no"};function S(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=T({name:t,style:Object.assign({},A,r)}),o=document.createDocumentFragment(),i=document.createElement("div");return i.style.clear="both",o.appendChild(n),o.appendChild(i),e.innerHTML="",e.appendChild(o),n}var I,A={border:"none",width:"100%",height:"100%",float:"left"},N="DNA_PAYMENTS_HOSTED_FIELDS_",P="dna-payments-hosted-field-",j="dna-payments-",M="https://dna-payments.github.io/hosted-fields",C={frameUrl:"".concat(M,"/hosted-fields-frame.html"),threeDSecureUrl:"".concat(M,"/three-d-secure-frame.html")},F=[M],U={cardholderName:{name:"cardholder-name",label:"Cardholder Name",autocomplete:"cc-name"},cardNumber:{name:"credit-card-number",label:"Credit Card Number",autocomplete:"cc-number"},cvv:{name:"cvv",label:"CVV",autocomplete:"cc-csc"},expirationDate:{name:"expiration",label:"Expiration Date",autocomplete:"cc-exp"}},k={SUBMIT:"".concat(N,"SUBMIT"),CLEAR:"".concat(N,"CLEAR"),FRAME_READY:"".concat(N,"FRAME_READY"),INPUT_EVENT:"".concat(N,"INPUT_EVENT")};!function(t){t.CLEAR="clear",t.FOCUS="focus",t.BLUR="blur",t.CHANGE="change",t.VALIDITY_CHANGE="validityChange"}(I||(I={}));var H={FOCUSED:"".concat(P,"focused"),INVALID:"".concat(P,"invalid"),VALID:"".concat(P,"valid")},W={FRAME_READY:"".concat(j,"three-d-secure-frame-ready"),SET_DATA:"".concat(j,"three-d-secure-set-data"),SHOW:"".concat(j,"three-d-secure-show"),HIDE:"".concat(j,"three-d-secure-hide")};function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function B(t,e,r){return(B=V()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&f(o,r.prototype),o}).apply(null,arguments)}function G(t){var e="function"==typeof Map?new Map:void 0;return(G=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return B(t,arguments,u(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,t)})(t)}var Y,z=function(t){l(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=u(e);if(r){var o=u(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return h(this,t)});function o(t){var e;return a(this,o),e=n.call(this,t.message),Object.setPrototypeOf(d(e),o.prototype),e.name="DnaPaymentsError",e.type=t.type,e.code=t.code,e.stack=Error().stack,e}return o}(G(Error));!function(t){t.UNKNOWN="UNKNOWN",t.MERCHANT="MERCHANT",t.CUSTOMER="CUSTOMER",t.INTERNAL="INTERNAL"}(Y||(Y={}));var K={internalError:function(t){var e=t.code,r=void 0===e?"00":e,n=t.message,o=void 0===n?"":n;return new z({type:Y.INTERNAL,code:r,message:o})},HOSTED_FIELDS_TIMEOUT:{type:Y.UNKNOWN,code:"HOSTED_FIELDS_TIMEOUT",message:"Hosted Fields timed out when attempting to set up."},NOT_ALLOWED_FIELD:{type:Y.MERCHANT,code:"NOT_ALLOWED_FIELD",message:"Not allowed hosted field"},NOT_IN_IFRAME:{type:Y.MERCHANT,code:"NOT_IN_IFRAME",message:"Must be in Iframe"},DUPLICATE_FIELD:{type:Y.MERCHANT,code:"DUPLICATE_FIELD",message:"Field is already initialized"},NOT_ALL_REQUIRED_FIELDS:{type:Y.MERCHANT,code:"NOT_ALL_REQUIRED_FIELDS",message:"Not all required fields are provided"},THREE_D_SECURE_TIMEOUT:{type:Y.INTERNAL,code:"THREE_D_SECURE_TIMEOUT",message:"ThreeDSecure timed out."}};var $=function(t){l(p,t);var e,r,n,o,f=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(n);if(o){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function p(t){var e;return a(this,p),(e=f.call(this)).options=t,e._isInitialized=!1,e._instanceId=_(),e.destroy=function(){e._bus.teardown()},e._bus=new(O())({channel:e._instanceId,verifyDomain:function(t){return F.indexOf(t)>=0}}),e}return e=p,(r=[{key:"init",value:function(){var t=this,e=this;return new Promise((function(r,n){if(t._isInitialized)r(e);else{var o=[],a={};Object.entries(e.options.fields).forEach((function(t){var r=i(t,2),n=r[0],c=r[1].container;S("".concat(P).concat(n),c).src="".concat(C.frameUrl,"#").concat(e._instanceId),o.push(new Promise((function(t){a[n]=t})))})),e._bus.on(k.FRAME_READY,(function(t,e){var r;t&&t.field&&(r=t.field,Object.keys(U).indexOf(r)>=0)&&a[t.field](e)})),t._threeDSecureFrame=S("".concat(P,"three-d-secure"),e.options.threeDSecure.container,{minHeight:"400px"}),t._threeDSecureFrame.src="".concat(C.threeDSecureUrl,"#").concat(e._instanceId),e._bus.on(W.FRAME_READY,(function(t,r){r(e.options)})),e.attachBusEvents.bind(e)();var c=setTimeout((function(){n(new z(K.HOSTED_FIELDS_TIMEOUT))}),6e4);Promise.all(o).then((function(t){t.forEach((function(t){return t(e.options)})),clearTimeout(c),e._isInitialized=!0,r(e)}))}}))}},{key:"submit",value:function(t){var e=this;return new Promise((function(r,n){e._bus.emit(k.SUBMIT,t,(function(t){console.log("payload",t);var o=i(t,2),a=o[0],c=o[1];a?n(a):(console.log("result.secure3D",Boolean(c.secure3D)),c.secure3D?e._bus.emit(W.SET_DATA,c,(function(t){var e=i(t,2),o=e[0];e[1],o?n(o):r(c)})):r(c))}))}))}},{key:"clear",value:function(){this._bus.emit(k.CLEAR)}},{key:"attachBusEvents",value:function(){var t=this;this._bus.on(k.INPUT_EVENT,(function(e){var r=e.type,n=e.payload,o=n.fieldKey,i=n.fieldsState,a=t.options.fields[o],c=a.classContainer,u=a.container,s=c||u,f=i[o];s.classList.toggle(H.FOCUSED,f.isFocused),s.classList.toggle(H.VALID,f.isTouched&&f.isValid),s.classList.toggle(H.INVALID,f.isTouched&&!f.isValid),t._emit(r,n)})),this._bus.on(W.SHOW,(function(e){t._emit(W.SHOW,e)})),this._bus.on(W.HIDE,(function(e){t._emit(W.HIDE,e)}))}},{key:"on",value:function(t,e){s(u(p.prototype),"on",this).call(this,t,e)}}])&&c(e.prototype,r),p}(D());window.dnaPayments||(window.dnaPayments={}),window.dnaPayments.hostedFields={create:function(t){return e=this,r=void 0,o=void 0,i=n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new $(t),e.next=3,r.init();case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})),new(o||(o=Promise))((function(t,n){function a(t){try{u(i.next(t))}catch(t){n(t)}}function c(t){try{u(i.throw(t))}catch(t){n(t)}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o((function(t){t(r)}))).then(a,c)}u((i=i.apply(e,r||[])).next())}));var e,r,o,i}}}()}();
//# sourceMappingURL=hosted-fields.js.map